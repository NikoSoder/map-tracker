<div class="mb-2 flex flex-col sm:flex-row sm:justify-between">
  <div class="mb-1 flex gap-4 sm:mb-0">
    <h2 class="text-2xl font-medium text-neutral-300">Your maps</h2>
    <div class="text-neutral-200">
      <button class="rounded bg-green-600 py-1 px-4 hover:bg-green-700">
        <fa-icon [icon]="faPlus"></fa-icon> New
      </button>
    </div>
  </div>
  <div class="relative">
    <div class="absolute inset-y-0 left-0 flex items-center p-2">
      <fa-icon class="search-icon" [icon]="faSearch"></fa-icon>
    </div>
    <input
      type="text"
      class="rounded border border-neutral-500 bg-zinc-700 py-1 pl-8 text-neutral-300 outline-none hover:border-neutral-400 focus:border-neutral-200"
      placeholder="Search"
      #input
      (keyup)="onSearch(input.value)"
    />
  </div>
</div>

<div class="table-container overflow-x-auto overflow-y-auto">
  <table class="w-full border-collapse">
    <thead>
      <tr class="text-left">
        <th
          tabindex="0"
          (click)="sort('map_name')"
          scope="col"
          class="sticky top-0 cursor-pointer bg-neutral-300 py-2 pl-3 text-neutral-800 hover:bg-neutral-100 focus:bg-neutral-100"
        >
          Name<fa-icon
            class="sort-icon ml-1"
            size="lg"
            [icon]="faSort"
          ></fa-icon>
        </th>
        <th
          tabindex="0"
          (click)="sort('map_type')"
          scope="col"
          class="sticky top-0 cursor-pointer bg-neutral-300 py-2 pl-3 text-neutral-800 hover:bg-neutral-100 focus:bg-neutral-100"
        >
          Style
          <fa-icon class="sort-icon ml-1" size="lg" [icon]="faSort"></fa-icon>
        </th>
        <th
          tabindex="0"
          (click)="sort('map_tier')"
          scope="col"
          class="sticky top-0 cursor-pointer bg-neutral-300 py-2 pl-3 text-neutral-800 hover:bg-neutral-100 focus:bg-neutral-100"
        >
          Tier<fa-icon
            class="sort-icon ml-1"
            size="lg"
            [icon]="faSort"
          ></fa-icon>
        </th>
        <th
          scope="col"
          class="sticky top-0 bg-neutral-300 py-2 pl-3 text-neutral-800"
        >
          Notes
        </th>
        <th
          tabindex="0"
          (click)="sort('map_completed')"
          scope="col"
          class="sticky top-0 cursor-pointer bg-neutral-300 py-2 pl-3 text-neutral-800 hover:bg-neutral-100 focus:bg-neutral-100"
        >
          Status<fa-icon
            class="sort-icon ml-1"
            size="lg"
            [icon]="faSort"
          ></fa-icon>
        </th>
        <th
          scope="col"
          class="sticky top-0 bg-neutral-300 py-2 pl-3 text-neutral-800"
        ></th>
      </tr>
    </thead>
    <tbody class="bg-zinc-800 text-neutral-200">
      <ng-container *ngFor="let map of maps">
        <tr
          *ngIf="map.map_name.includes(searchInput)"
          class="border-b border-neutral-500 hover:bg-zinc-700"
        >
          <td class="px-3 py-1">
            {{ map.map_name }}
          </td>
          <td class="px-3 py-1 text-neutral-400">
            {{ map.map_type }}
          </td>
          <td class="px-3 py-1 text-neutral-400">
            {{ map.map_tier }}
          </td>
          <td class="px-3 py-1 text-neutral-400">
            {{ map.map_notes }}
          </td>
          <td *ngIf="map.map_completed === 1; else project" class="px-3 py-1">
            <span
              class="rounded-full bg-green-900 px-2.5 py-0.5 text-xs font-medium text-green-300"
              >Completed</span
            >
          </td>
          <ng-template #project
            ><td class="px-3 py-1">
              <span
                class="rounded-full bg-yellow-900 px-2.5 py-0.5 text-xs font-medium text-yellow-300"
                >Project</span
              >
            </td></ng-template
          >
          <td class="py-1">
            <a
              routerLink="/detail/{{ map.id }}"
              class="font-semibold text-blue-500 hover:underline"
              >Edit</a
            >
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
